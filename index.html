<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centro de Testes Cognitivos</title>

    <link rel="icon" href="1.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="1.ico" type="image/x-icon" />

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e8f4f8 0%, #ffffff 50%, #e8f4f8 100%);
            color: #2c3e50;
            min-height: 100vh;
            overflow-x: hidden;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        * {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        input, textarea {
            user-select: text;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 8px;
            height: 8px;
            background: linear-gradient(135deg, #3498db, #2ecc71);
            border-radius: 50%;
            animation: float-particle 8s infinite ease-in-out;
            opacity: 0.3;
        }

        @keyframes float-particle {
            0%, 100% { 
                transform: translate(0, 0);
                opacity: 0.2; 
            }
            25% {
                transform: translate(20px, -20px);
                opacity: 0.4;
            }
            50% { 
                transform: translate(-15px, -40px);
                opacity: 0.6; 
            }
            75% {
                transform: translate(15px, -20px);
                opacity: 0.4;
            }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(52, 152, 219, 0.3); }
            50% { box-shadow: 0 0 40px rgba(46, 204, 113, 0.5); }
        }

        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            z-index: 1000;
            border-bottom: 2px solid rgba(52, 152, 219, 0.3);
            box-shadow: 0 2px 20px rgba(52, 152, 219, 0.1);
        }

        .top-bar-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: flex-end;
            align-items: center;
        }

        .top-btn {
            padding: 10px 25px;
            background: linear-gradient(45deg, #3498db, #2ecc71);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .top-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(52, 152, 219, 0.4);
        }

        #topUserName {
            color: #2c3e50;
            margin-right: 15px;
            font-weight: bold;
        }

        .container {
            margin-top: 80px;
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 20px;
            animation: slideIn 0.8s ease-out;
        }

        .header h1 {
            font-size: 3em;
            background: linear-gradient(45deg, #2c3e50, #3498db, #2ecc71);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: float 3s ease-in-out infinite;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            color: #7f8c8d;
            margin-top: 10px;
        }

        .auth-container, .menu-container, .test-container, .result-container, .history-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin: 20px 0;
            border: 2px solid rgba(52, 152, 219, 0.3);
            box-shadow: 0 10px 40px rgba(52, 152, 219, 0.1);
            animation: slideIn 0.8s ease-out, glow 3s infinite;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(52, 152, 219, 0.5);
            border-radius: 10px;
            color: #2c3e50;
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.3);
            background: #fff;
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #3498db, #2ecc71);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(52, 152, 219, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #95a5a6, #7f8c8d);
        }

        .btn-secondary:hover {
            box-shadow: 0 10px 30px rgba(127, 140, 141, 0.4);
        }

        .hidden {
            display: none !important;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        @media (max-width: 1024px) {
            .menu-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .typing-stats {
                grid-template-columns: 1fr;
            }
        }

        .menu-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid rgba(52, 152, 219, 0.2);
            box-shadow: 0 5px 20px rgba(52, 152, 219, 0.1);
        }

        .menu-card:hover {
            transform: translateY(-5px);
            border-color: #3498db;
            box-shadow: 0 10px 30px rgba(52, 152, 219, 0.3);
            background: #fff;
        }

        .menu-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.5em;
        }

        .menu-card p {
            color: #7f8c8d;
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-number {
            color: #3498db;
            font-size: 1.2em;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.3em;
            margin-bottom: 20px;
            line-height: 1.6;
            color: #2c3e50;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option {
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid rgba(52, 152, 219, 0.3);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            color: #2c3e50;
        }

        .option:hover {
            border-color: #3498db;
            background: #fff;
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2);
        }

        .option.selected {
            background: rgba(52, 152, 219, 0.2);
            border-color: #2ecc71;
        }

        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 30px;
            border: 1px solid rgba(52, 152, 219, 0.2);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            transition: width 0.3s;
        }

        .result-card {
            text-align: center;
            padding: 40px;
        }

        .result-score {
            font-size: 5em;
            background: linear-gradient(45deg, #3498db, #2ecc71);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: pulse 2s infinite;
            margin: 20px 0;
        }

        .result-animal {
            font-size: 2.5em;
            margin: 20px 0;
            color: #2c3e50;
        }

        .result-description {
            font-size: 1.3em;
            color: #7f8c8d;
            margin: 20px 0;
            line-height: 1.6;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid rgba(52, 152, 219, 0.2);
        }

        .stat-value {
            font-size: 2.5em;
            color: #3498db;
            font-weight: bold;
        }

        .stat-label {
            color: #7f8c8d;
            margin-top: 5px;
        }

        .history-list {
            margin-top: 30px;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid rgba(52, 152, 219, 0.2);
        }

        .history-date {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .history-score {
            font-size: 1.5em;
            color: #3498db;
            font-weight: bold;
        }

        .timer {
            position: fixed;
            top: 80px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 1.5em;
            color: #2c3e50;
            border: 2px solid rgba(52, 152, 219, 0.5);
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(52, 152, 219, 0.2);
        }

        .card-icon {
            margin-bottom: 15px;
            filter: drop-shadow(0 0 10px rgba(52, 152, 219, 0.3));
        }

        .cps-click-area {
            width: 300px;
            height: 300px;
            background: linear-gradient(135deg, #3498db, #2ecc71);
            border: none;
            border-radius: 20px;
            font-size: 2em;
            font-weight: bold;
            color: #fff;
            cursor: pointer;
            transition: all 0.1s;
            box-shadow: 0 10px 40px rgba(52, 152, 219, 0.4);
            margin: 20px auto;
            display: block;
        }

        .cps-click-area:hover {
            transform: scale(1.05);
        }

        .cps-click-area:active {
            transform: scale(0.95);
        }

        .cps-click-area:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .typing-display {
            max-width: 800px;
            margin: 0 auto;
        }

        .typing-text {
            background: rgba(255, 255, 255, 0.8);
            padding: 30px;
            border-radius: 15px;
            font-size: 1.5em;
            line-height: 1.8;
            margin-bottom: 30px;
            min-height: 100px;
            color: #2c3e50;
            letter-spacing: 1px;
            border: 2px solid rgba(52, 152, 219, 0.2);
        }

        .typing-text .correct {
            color: #2ecc71;
        }

        .typing-text .incorrect {
            color: #e74c3c;
            background: rgba(231, 76, 60, 0.2);
        }

        .typing-text .current {
            background: rgba(52, 152, 219, 0.3);
            padding: 0 2px;
        }

        .typing-input {
            width: 100%;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(52, 152, 219, 0.5);
            border-radius: 10px;
            color: #2c3e50;
            font-size: 1.3em;
            margin-bottom: 30px;
        }

        .typing-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.3);
            background: #fff;
        }

        .typing-input:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .typing-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid rgba(52, 152, 219, 0.2);
        }

        .stat-item .stat-label {
            color: #7f8c8d;
            font-size: 0.9em;
            display: block;
            margin-bottom: 10px;
        }

        .stat-item .stat-value {
            color: #3498db;
            font-size: 2em;
            font-weight: bold;
        }

        .reaction-display {
            max-width: 800px;
            margin: 0 auto;
        }

        .reaction-area {
            width: 100%;
            height: 400px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            margin-bottom: 30px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid rgba(52, 152, 219, 0.3);
            color: #2c3e50;
        }

        .reaction-area.waiting {
            background: rgba(231, 76, 60, 0.2);
            border-color: #e74c3c;
        }

        .reaction-area.ready {
            background: rgba(46, 204, 113, 0.3);
            border-color: #2ecc71;
            animation: pulse 0.5s infinite;
        }

        .reaction-area.clicked {
            background: rgba(52, 152, 219, 0.3);
        }

        .reaction-results {
            background: rgba(255, 255, 255, 0.8);
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            border: 2px solid rgba(52, 152, 219, 0.2);
        }

        .reaction-attempt {
            padding: 15px;
            margin: 10px 0;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .reaction-attempt.fast {
            border-left: 4px solid #2ecc71;
        }

        .reaction-attempt.medium {
            border-left: 4px solid #f39c12;
        }

        .reaction-attempt.slow {
            border-left: 4px solid #e74c3c;
        }

        .aim-stats-bar {
            display: flex;
            justify-content: space-around;
            background: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1.2em;
            border: 2px solid rgba(52, 152, 219, 0.2);
        }

        .aim-stats-bar div {
            color: #2c3e50;
        }

        .aim-stats-bar span {
            color: #3498db;
            font-weight: bold;
            margin-left: 5px;
        }

        .aim-area {
            width: 100%;
            height: 500px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: #7f8c8d;
            border: 2px solid rgba(52, 152, 219, 0.3);
        }

        .target {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: crosshair;
            transition: all 0.3s;
            animation: targetPulse 1s infinite;
        }

        .target::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle, #e74c3c, #c0392b);
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.8);
        }

        .target::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: #fff;
            border-radius: 50%;
        }

        @keyframes targetPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .target:hover {
            transform: scale(1.2);
        }

        .link-btn {
            color: #3498db;
            cursor: pointer;
            text-decoration: underline;
            background: none;
            border: none;
            font-size: 1em;
            margin-top: 15px;
        }

        .link-btn:hover {
            color: #2ecc71;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="top-bar" id="topBar">
        <div class="top-bar-content">
            <div id="userDisplay" class="hidden">
                <span id="topUserName"></span>
                <button class="top-btn" onclick="logout()">Sair</button>
            </div>
            <div id="guestDisplay">
                <button class="top-btn" onclick="openAuth()">Login / Cadastro</button>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="header">
            <svg width="100" height="100" viewBox="0 0 120 120" style="margin-bottom: 20px;">
                <defs>
                    <linearGradient id="brainGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#2ecc71;stop-opacity:1" />
                    </linearGradient>
                </defs>
                
                <path d="M60 25 C45 25 35 30 32 40 C30 35 25 32 20 35 C15 38 15 45 18 50 C15 52 13 56 15 60 C17 64 20 65 23 64 C23 70 28 75 35 77 C35 82 38 87 43 90 C48 93 54 93 60 90 C66 93 72 93 77 90 C82 87 85 82 85 77 C92 75 97 70 97 64 C100 65 103 64 105 60 C107 56 105 52 102 50 C105 45 105 38 100 35 C95 32 90 35 88 40 C85 30 75 25 60 25 Z" 
                      fill="url(#brainGrad)" stroke="none"/>
                
                <path d="M45 45 Q50 40 55 45 T65 45" stroke="#fff" stroke-width="2" fill="none" opacity="0.6"/>
                <path d="M40 55 Q45 50 50 55 T60 55" stroke="#fff" stroke-width="2" fill="none" opacity="0.6"/>
                <path d="M65 50 Q70 45 75 50 T85 50" stroke="#fff" stroke-width="2" fill="none" opacity="0.6"/>
                <path d="M35 65 Q40 60 45 65 T55 65" stroke="#fff" stroke-width="2" fill="none" opacity="0.6"/>
                <path d="M60 60 Q65 55 70 60 T80 60" stroke="#fff" stroke-width="2" fill="none" opacity="0.6"/>
                <path d="M45 75 Q50 70 55 75 T65 75" stroke="#fff" stroke-width="2" fill="none" opacity="0.6"/>
                
                <ellipse cx="45" cy="48" rx="3" ry="4" fill="#fff" opacity="0.8"/>
                <ellipse cx="75" cy="48" rx="3" ry="4" fill="#fff" opacity="0.8"/>
                <circle cx="60" cy="70" r="2" fill="#fff" opacity="0.8"/>
            </svg>
            <h1>Centro de Testes Cognitivos</h1>
            <p>Avalie suas habilidades mentais e físicas</p>
        </div>

        <div id="authSection" class="auth-container hidden">
            <div id="loginForm">
                <h2 style="text-align: center; color: #00ffff; margin-bottom: 30px;">Login</h2>
                <div class="form-group">
                    <label>Usuário</label>
                    <input type="text" id="loginUsername" placeholder="Digite seu usuário">
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <input type="password" id="loginPassword" placeholder="Digite sua senha">
                </div>
                <button class="btn" onclick="login()">Entrar</button>
                <button class="link-btn" onclick="showRegister()">Não tem conta? Cadastre-se</button>
                <button class="btn btn-secondary" onclick="closeAuth()">Voltar</button>
            </div>

            <div id="registerForm" class="hidden">
                <h2 style="text-align: center; color: #00ffff; margin-bottom: 30px;">Cadastro</h2>
                <div class="form-group">
                    <label>Nome Completo</label>
                    <input type="text" id="registerName" placeholder="Digite seu nome completo">
                </div>
                <div class="form-group">
                    <label>Usuário</label>
                    <input type="text" id="registerUsername" placeholder="Escolha um usuário">
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <input type="password" id="registerPassword" placeholder="Escolha uma senha">
                </div>
                <button class="btn" onclick="register()">Cadastrar</button>
                <button class="link-btn" onclick="showLogin()">Já tem conta? Faça login</button>
                <button class="btn btn-secondary" onclick="closeAuth()">Voltar</button>
            </div>
        </div>

        <div id="menuSection" class="menu-container">
            <div class="menu-grid">
                <div class="menu-card" onclick="startTest('iq')">
                    <svg width="80" height="80" viewBox="0 0 100 100" class="card-icon">
                        <defs>
                            <linearGradient id="iqGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#2ecc71;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle cx="50" cy="35" r="15" fill="url(#iqGrad)"/>
                        <path d="M30 55 C30 48 38 45 50 45 C62 45 70 48 70 55 L70 80 L30 80 Z" fill="url(#iqGrad)"/>
                        <circle cx="50" cy="30" r="3" fill="#fff"/>
                        <rect x="48" y="35" width="4" height="15" fill="#fff"/>
                    </svg>
                    <h3>Teste de QI</h3>
                    <p>20 questões de lógica e raciocínio</p>
                </div>
                
                <div class="menu-card" onclick="startTest('cps')">
                    <svg width="80" height="80" viewBox="0 0 100 100" class="card-icon">
                        <defs>
                            <linearGradient id="cpsGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#2ecc71;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <rect x="25" y="30" width="50" height="35" rx="5" fill="url(#cpsGrad)"/>
                        <circle cx="50" cy="47" r="8" fill="#fff"/>
                        <rect x="35" y="68" width="30" height="4" fill="url(#cpsGrad)"/>
                    </svg>
                    <h3>Teste de Cliques</h3>
                    <p>Cliques por segundo</p>
                </div>

                <div class="menu-card" onclick="startTest('typing')">
                    <svg width="80" height="80" viewBox="0 0 100 100" class="card-icon">
                        <defs>
                            <linearGradient id="typingGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#27ae60;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#2ecc71;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <rect x="20" y="35" width="60" height="35" rx="3" fill="url(#typingGrad)"/>
                        <rect x="25" y="42" width="8" height="6" rx="1" fill="#fff"/>
                        <rect x="36" y="42" width="8" height="6" rx="1" fill="#fff"/>
                        <rect x="47" y="42" width="8" height="6" rx="1" fill="#fff"/>
                        <rect x="58" y="42" width="8" height="6" rx="1" fill="#fff"/>
                        <rect x="69" y="42" width="8" height="6" rx="1" fill="#fff"/>
                        <rect x="30" y="52" width="40" height="6" rx="1" fill="#fff"/>
                    </svg>
                    <h3>Velocidade de Digitação</h3>
                    <p>Digite o mais rápido possível</p>
                </div>

                <div class="menu-card" onclick="startTest('reaction')">
                    <svg width="80" height="80" viewBox="0 0 100 100" class="card-icon">
                        <defs>
                            <linearGradient id="reactionGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#e67e22;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#f39c12;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle cx="50" cy="35" r="12" fill="url(#reactionGrad)"/>
                        <circle cx="35" cy="55" r="8" fill="url(#reactionGrad)"/>
                        <circle cx="65" cy="55" r="8" fill="url(#reactionGrad)"/>
                        <circle cx="50" cy="70" r="10" fill="url(#reactionGrad)"/>
                        <path d="M50 40 L50 28" stroke="#fff" stroke-width="3"/>
                        <path d="M50 40 L42 48" stroke="#fff" stroke-width="3"/>
                    </svg>
                    <h3>Tempo de Reação</h3>
                    <p>Teste seus reflexos</p>
                </div>

                <div class="menu-card" onclick="startTest('aim')">
                    <svg width="80" height="80" viewBox="0 0 100 100" class="card-icon">
                        <defs>
                            <linearGradient id="aimGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle cx="50" cy="50" r="25" fill="none" stroke="url(#aimGrad)" stroke-width="3"/>
                        <circle cx="50" cy="50" r="15" fill="none" stroke="url(#aimGrad)" stroke-width="3"/>
                        <circle cx="50" cy="50" r="5" fill="url(#aimGrad)"/>
                        <line x1="50" y1="25" x2="50" y2="35" stroke="url(#aimGrad)" stroke-width="2"/>
                        <line x1="50" y1="65" x2="50" y2="75" stroke="url(#aimGrad)" stroke-width="2"/>
                        <line x1="25" y1="50" x2="35" y2="50" stroke="url(#aimGrad)" stroke-width="2"/>
                        <line x1="65" y1="50" x2="75" y2="50" stroke="url(#aimGrad)" stroke-width="2"/>
                    </svg>
                    <h3>Teste de Mira</h3>
                    <p>Precisão e velocidade</p>
                </div>

                <div class="menu-card" onclick="showHistory()">
                    <svg width="80" height="80" viewBox="0 0 100 100" class="card-icon">
                        <defs>
                            <linearGradient id="histGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#f39c12;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#e67e22;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <rect x="30" y="25" width="40" height="50" rx="3" fill="url(#histGrad)"/>
                        <line x1="38" y1="35" x2="62" y2="35" stroke="#fff" stroke-width="3"/>
                        <line x1="38" y1="45" x2="55" y2="45" stroke="#fff" stroke-width="3"/>
                        <line x1="38" y1="55" x2="62" y2="55" stroke="#fff" stroke-width="3"/>
                        <line x1="38" y1="65" x2="50" y2="65" stroke="#fff" stroke-width="3"/>
                    </svg>
                    <h3>Histórico</h3>
                    <p>Veja todos os seus resultados</p>
                </div>
            </div>
        </div>

        <div id="testSection" class="test-container hidden">
            <div class="timer" id="timer">20:00</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div id="questionContainer"></div>
            <button class="btn" id="nextBtn" onclick="nextQuestion()">Próxima</button>
            <button class="btn btn-secondary" onclick="backToMenu()">Voltar ao Menu</button>
        </div>

        <div id="cpsSection" class="test-container hidden">
            <h2 style="text-align: center; color: #2c3e50; margin-bottom: 30px;">Teste de Cliques por Segundo</h2>
            <div id="cpsDisplay" style="text-align: center; margin: 50px 0;">
                <div style="font-size: 1.2em; color: #7f8c8d; margin-bottom: 20px;">Clique o mais rápido possível!</div>
                <div id="cpsTimer" style="font-size: 3em; color: #3498db; margin: 30px 0;">10</div>
                <button id="cpsButton" class="cps-click-area" onclick="handleCPSClick()">CLIQUE AQUI</button>
                <div id="cpsCounter" style="font-size: 2em; color: #2c3e50; margin-top: 30px;">Cliques: 0</div>
            </div>
            <button class="btn btn-secondary" onclick="backToMenu()">Voltar ao Menu</button>
        </div>

        <div id="typingSection" class="test-container hidden">
            <h2 style="text-align: center; color: #2c3e50; margin-bottom: 30px;">Teste de Velocidade de Digitação</h2>
            <div class="typing-display">
                <div id="typingText" class="typing-text"></div>
                <input type="text" id="typingInput" class="typing-input" placeholder="Digite aqui..." disabled>
                <div class="typing-stats">
                    <div class="stat-item">
                        <span class="stat-label">Tempo:</span>
                        <span id="typingTimer" class="stat-value">0.0s</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">PPM:</span>
                        <span id="typingWPM" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Precisão:</span>
                        <span id="typingAccuracy" class="stat-value">100%</span>
                    </div>
                </div>
                <button class="btn" onclick="startTypingTest()" id="typingStartBtn">Iniciar Teste</button>
            </div>
            <button class="btn btn-secondary" onclick="backToMenu()">Voltar ao Menu</button>
        </div>

        <div id="reactionSection" class="test-container hidden">
            <h2 style="text-align: center; color: #2c3e50; margin-bottom: 30px;">Teste de Tempo de Reação</h2>
            <div class="reaction-display">
                <div id="reactionArea" class="reaction-area" onclick="handleReactionClick()">
                    <div id="reactionMessage">Clique em INICIAR</div>
                </div>
                <button class="btn" onclick="startReactionTest()" id="reactionStartBtn">Iniciar Teste</button>
                <div id="reactionResults" class="reaction-results hidden">
                    <h3 style="color: #2c3e50; margin-bottom: 20px;">Resultados (5 tentativas)</h3>
                    <div id="reactionAttempts"></div>
                    <div style="margin-top: 20px;">
                        <span style="color: #7f8c8d;">Tempo Médio: </span>
                        <span id="reactionAverage" style="color: #3498db; font-size: 1.5em; font-weight: bold;"></span>
                    </div>
                </div>
            </div>
            <button class="btn btn-secondary" onclick="backToMenu()">Voltar ao Menu</button>
        </div>

        <div id="aimSection" class="test-container hidden">
            <h2 style="text-align: center; color: #2c3e50; margin-bottom: 20px;">Teste de Mira</h2>
            <div class="aim-stats-bar">
                <div>Alvos: <span id="aimTargets">0</span>/30</div>
                <div>Tempo: <span id="aimTimer">60</span>s</div>
                <div>Precisão: <span id="aimAccuracy">0</span>%</div>
            </div>
            <div id="aimArea" class="aim-area">
                <div id="aimMessage">Clique em INICIAR</div>
            </div>
            <button class="btn" onclick="startAimTest()" id="aimStartBtn">Iniciar Teste</button>
            <button class="btn btn-secondary" onclick="backToMenu()">Voltar ao Menu</button>
        </div>

        <div id="resultSection" class="result-container hidden">
            <div class="result-card">
                <h2 style="color: #00ffff; margin-bottom: 20px;">Resultado do Teste</h2>
                <div class="result-score" id="finalScore"></div>
                <div class="result-animal" id="animalComparison"></div>
                <div class="result-description" id="resultDescription"></div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="correctAnswers"></div>
                        <div class="stat-label">Acertos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="percentage"></div>
                        <div class="stat-label">Percentual</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="timeTaken"></div>
                        <div class="stat-label">Tempo</div>
                    </div>
                </div>

                <button class="btn" onclick="startTest()">Fazer Novo Teste</button>
                <button class="btn btn-secondary" onclick="backToMenu()">Voltar ao Menu</button>
            </div>
        </div>

        <div id="historySection" class="history-container hidden">
            <h2 style="text-align: center; color: #2c3e50; margin-bottom: 30px;">Histórico de Testes</h2>
            <div id="historyList" class="history-list"></div>
            <button class="btn btn-secondary" onclick="backToMenu()">Voltar ao Menu</button>
        </div>
    </div>

    <script>
        const allQuestions = [
            {
                question: "Qual número completa a sequência: 2, 4, 8, 16, 32, ?",
                options: ["48", "64", "52", "36"],
                correct: 1
            },
            {
                question: "Se todos os A são B e alguns B são C, então:",
                options: ["Todos os A são C", "Alguns A podem ser C", "Nenhum A é C", "Todos os C são A"],
                correct: 1
            },
            {
                question: "Complete a analogia: DIA está para NOITE assim como SOL está para:",
                options: ["Estrela", "Lua", "Céu", "Escuridão"],
                correct: 1
            },
            {
                question: "Quantos triângulos existem em um pentagrama (estrela de 5 pontas)?",
                options: ["5", "10", "15", "20"],
                correct: 1
            },
            {
                question: "Qual número não pertence ao grupo: 3, 5, 11, 14, 17, 21",
                options: ["14", "21", "11", "5"],
                correct: 0
            },
            {
                question: "Se você reorganizar as letras 'CIFAIPC', obtém o nome de:",
                options: ["Um país", "Um oceano", "Uma cidade", "Um animal"],
                correct: 1
            },
            {
                question: "Complete: 1, 1, 2, 3, 5, 8, 13, ?",
                options: ["18", "21", "19", "15"],
                correct: 1
            },
            {
                question: "Qual o próximo na sequência: J, F, M, A, M, ?",
                options: ["J", "A", "S", "N"],
                correct: 0
            },
            {
                question: "Um relógio marca 3:15. Qual é o ângulo entre os ponteiros?",
                options: ["7.5°", "0°", "15°", "22.5°"],
                correct: 0
            },
            {
                question: "Quantos cubos de 1cm cabem em um cubo de 3cm?",
                options: ["9", "18", "27", "36"],
                correct: 2
            },
            {
                question: "Se 5 máquinas fazem 5 produtos em 5 minutos, quanto tempo 100 máquinas levam para fazer 100 produtos?",
                options: ["5 minutos", "20 minutos", "100 minutos", "10 minutos"],
                correct: 0
            },
            {
                question: "Complete o padrão: O, T, T, F, F, S, S, ?",
                options: ["N", "E", "O", "T"],
                correct: 1
            },
            {
                question: "Maria é mais velha que João. João é mais velho que Pedro. Quem é o mais novo?",
                options: ["Maria", "João", "Pedro", "Impossível determinar"],
                correct: 2
            },
            {
                question: "Qual número multiplicado por si mesmo dá 144?",
                options: ["11", "12", "13", "14"],
                correct: 1
            },
            {
                question: "Se LÓGICA = 123456 e IGUAL = 78961, quanto é ALGOL?",
                options: ["61231", "91231", "61321", "91321"],
                correct: 0
            },
            {
                question: "Quantos dias tem exatamente 4 semanas completas?",
                options: ["28", "30", "31", "29"],
                correct: 0
            },
            {
                question: "Se A=1, B=2, C=3... Quanto vale ZEBRA?",
                options: ["52", "62", "72", "82"],
                correct: 1
            },
            {
                question: "Qual número continua: 100, 50, 52, 26, 28, 14, ?",
                options: ["7", "16", "12", "15"],
                correct: 1
            },
            {
                question: "Quantos quadrados existem em um tabuleiro de xadrez 8x8?",
                options: ["64", "204", "304", "104"],
                correct: 1
            },
            {
                question: "Se hoje é quarta-feira, que dia será daqui a 100 dias?",
                options: ["Quinta", "Sexta", "Sábado", "Domingo"],
                correct: 1
            },
            {
                question: "Qual número vem a seguir: 3, 6, 12, 24, ?",
                options: ["36", "48", "40", "32"],
                correct: 1
            },
            {
                question: "Se um trem viaja 60 km em 40 minutos, quantos km percorre em 2 horas?",
                options: ["120", "180", "150", "90"],
                correct: 1
            },
            {
                question: "Complete: 2, 5, 10, 17, 26, ?",
                options: ["35", "37", "38", "36"],
                correct: 1
            },
            {
                question: "Qual é o número seguinte: 1, 4, 9, 16, 25, ?",
                options: ["30", "36", "34", "35"],
                correct: 1
            },
            {
                question: "Se CAT = 24, DOG = 26, qual é o valor de BIRD?",
                options: ["34", "35", "36", "33"],
                correct: 0
            },
            {
                question: "Quantas faces tem um cubo?",
                options: ["4", "6", "8", "12"],
                correct: 1
            },
            {
                question: "Se 3 gatos pegam 3 ratos em 3 minutos, quantos gatos são necessários para pegar 100 ratos em 100 minutos?",
                options: ["3", "33", "100", "10"],
                correct: 0
            },
            {
                question: "Qual letra continua: A, C, F, J, ?",
                options: ["M", "N", "O", "P"],
                correct: 2
            },
            {
                question: "Se você tem 6 maçãs e tira 4, quantas você tem?",
                options: ["2", "4", "6", "10"],
                correct: 1
            },
            {
                question: "Complete: 81, 27, 9, 3, ?",
                options: ["1", "0", "2", "3"],
                correct: 0
            },
            {
                question: "Quantas diagonais tem um pentágono?",
                options: ["3", "5", "7", "10"],
                correct: 1
            },
            {
                question: "Se 2 + 3 = 10, 6 + 5 = 66, então 8 + 4 = ?",
                options: ["48", "96", "84", "12"],
                correct: 1
            },
            {
                question: "Qual número falta: 7, 14, ?, 28, 35",
                options: ["20", "21", "22", "19"],
                correct: 1
            },
            {
                question: "Complete a sequência: Z, Y, X, W, ?",
                options: ["V", "U", "T", "S"],
                correct: 0
            },
            {
                question: "Se BRASIL tem 6 letras e FRANCE tem 6 letras, quantas letras tem ITALY?",
                options: ["4", "5", "6", "7"],
                correct: 1
            },
            {
                question: "Qual é o próximo primo após 17?",
                options: ["18", "19", "20", "21"],
                correct: 1
            },
            {
                question: "Se um livro tem 400 páginas, qual é a página do meio?",
                options: ["200", "201", "199", "202"],
                correct: 0
            },
            {
                question: "Complete: 10, 20, 30, 40, ?",
                options: ["45", "50", "55", "60"],
                correct: 1
            },
            {
                question: "Quantos minutos há em uma semana?",
                options: ["10080", "7200", "10000", "8640"],
                correct: 0
            },
            {
                question: "Se AMOR é escrito como 1234, ROMA seria:",
                options: ["3241", "4231", "3421", "2341"],
                correct: 0
            },
            {
                question: "Qual número é diferente: 2, 3, 6, 7, 8, 14, 15, 30?",
                options: ["8", "30", "7", "6"],
                correct: 0
            },
            {
                question: "Complete: 5, 10, 20, 40, ?",
                options: ["60", "70", "80", "90"],
                correct: 2
            },
            {
                question: "Se VERDE = 54321 e PRETO = 65178, qual é o valor de PRATO?",
                options: ["65178", "65718", "64178", "65187"],
                correct: 1
            },
            {
                question: "Qual figura geométrica tem exatamente 4 lados e 4 ângulos iguais?",
                options: ["Retângulo", "Quadrado", "Losango", "Trapézio"],
                correct: 1
            },
            {
                question: "Se um ano tem 365 dias, quantas horas tem um ano?",
                options: ["8670", "8760", "8640", "8850"],
                correct: 1
            }
        ];

        const animalComparisons = [
            { min: 0, max: 3, animal: "Lagarto", qi: "60-70", description: "Continue praticando! Todos começam de algum lugar." },
            { min: 4, max: 6, animal: "Cachorro", qi: "70-80", description: "Você demonstra inteligência básica. Com prática, pode melhorar bastante!" },
            { min: 7, max: 9, animal: "Porco", qi: "80-90", description: "Bom desempenho! Você está acima da média animal." },
            { min: 10, max: 12, animal: "Chimpanzé", qi: "90-100", description: "Excelente! Sua inteligência é comparável aos primatas mais inteligentes." },
            { min: 13, max: 15, animal: "Golfinho", qi: "100-110", description: "Muito bom! Você demonstra grande capacidade cognitiva." },
            { min: 16, max: 17, animal: "Elefante", qi: "110-120", description: "Impressionante! Você tem memória e raciocínio excepcionais." },
            { min: 18, max: 19, animal: "Gorila", qi: "120-130", description: "Extraordinário! Você está entre os mais inteligentes." },
            { min: 20, max: 20, animal: "Einstein", qi: "140+", description: "GENIAL! Pontuação perfeita! Você é um verdadeiro gênio!" }
        ];

        let currentUser = null;
        let currentQuestion = 0;
        let userAnswers = [];
        let startTime = null;
        let timerInterval = null;
        let questions = [];

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function selectRandomQuestions() {
            const shuffled = shuffleArray(allQuestions);
            return shuffled.slice(0, 20);
        }

        function initStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 8 + 's';
                star.style.animationDuration = (6 + Math.random() * 6) + 's';
                starsContainer.appendChild(star);
            }
        }

        function showRegister() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
        }

        function showLogin() {
            document.getElementById('registerForm').classList.add('hidden');
            document.getElementById('loginForm').classList.remove('hidden');
        }

        function openAuth() {
            document.getElementById('authSection').classList.remove('hidden');
            document.getElementById('menuSection').classList.add('hidden');
            showLogin();
        }

        function closeAuth() {
            document.getElementById('authSection').classList.add('hidden');
            document.getElementById('menuSection').classList.remove('hidden');
        }

        function register() {
            const name = document.getElementById('registerName').value.trim();
            const username = document.getElementById('registerUsername').value.trim();
            const password = document.getElementById('registerPassword').value.trim();

            if (!name || !username || !password) {
                alert('Por favor, preencha todos os campos!');
                return;
            }

            const users = JSON.parse(localStorage.getItem('iqTestUsers') || '{}');
            
            if (users[username]) {
                alert('Este usuário já existe!');
                return;
            }

            users[username] = {
                name: name,
                password: password,
                history: []
            };

            localStorage.setItem('iqTestUsers', JSON.stringify(users));
            alert('Cadastro realizado com sucesso!');
            showLogin();
        }

        function login() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value.trim();

            if (!username || !password) {
                alert('Por favor, preencha todos os campos!');
                return;
            }

            const users = JSON.parse(localStorage.getItem('iqTestUsers') || '{}');
            
            if (!users[username] || users[username].password !== password) {
                alert('Usuário ou senha incorretos!');
                return;
            }

            currentUser = username;
            document.getElementById('userDisplay').classList.remove('hidden');
            document.getElementById('guestDisplay').classList.add('hidden');
            document.getElementById('topUserName').textContent = `Olá, ${users[username].name}!`;
            closeAuth();
            document.getElementById('loginUsername').value = '';
            document.getElementById('loginPassword').value = '';
        }

        function logout() {
            currentUser = null;
            document.getElementById('userDisplay').classList.add('hidden');
            document.getElementById('guestDisplay').classList.remove('hidden');
            document.getElementById('loginUsername').value = '';
            document.getElementById('loginPassword').value = '';
        }

        function startTest(testType) {
            document.getElementById('menuSection').classList.add('hidden');
            document.getElementById('resultSection').classList.add('hidden');
            document.getElementById('historySection').classList.add('hidden');
            document.getElementById('testSection').classList.add('hidden');
            document.getElementById('cpsSection').classList.add('hidden');
            document.getElementById('typingSection').classList.add('hidden');
            document.getElementById('reactionSection').classList.add('hidden');
            document.getElementById('aimSection').classList.add('hidden');

            if (testType === 'iq') {
                questions = selectRandomQuestions();
                currentQuestion = 0;
                userAnswers = [];
                startTime = Date.now();
                document.getElementById('testSection').classList.remove('hidden');
                startTimer();
                showQuestion();
            } else if (testType === 'cps') {
                document.getElementById('cpsSection').classList.remove('hidden');
                initCPSTest();
            } else if (testType === 'typing') {
                document.getElementById('typingSection').classList.remove('hidden');
                prepareTypingTest();
            } else if (testType === 'reaction') {
                document.getElementById('reactionSection').classList.remove('hidden');
                prepareReactionTest();
            } else if (testType === 'aim') {
                document.getElementById('aimSection').classList.remove('hidden');
                prepareAimTest();
            }
        }

        let cpsClicks = 0;
        let cpsTimeLeft = 10;
        let cpsInterval = null;
        let cpsActive = false;

        function initCPSTest() {
            cpsClicks = 0;
            cpsTimeLeft = 10;
            cpsActive = false;
            document.getElementById('cpsTimer').textContent = cpsTimeLeft;
            document.getElementById('cpsCounter').textContent = 'Cliques: 0';
            const button = document.getElementById('cpsButton');
            button.textContent = 'COMEÇAR';
            button.disabled = false;
        }

        function handleCPSClick() {
            if (!cpsActive) {
                startCPSTest();
                return;
            }
            cpsClicks++;
            document.getElementById('cpsCounter').textContent = 'Cliques: ' + cpsClicks;
        }

        function startCPSTest() {
            cpsActive = true;
            cpsClicks = 0;
            cpsTimeLeft = 10;
            document.getElementById('cpsButton').textContent = 'CLIQUE!';
            document.getElementById('cpsCounter').textContent = 'Cliques: 0';

            cpsInterval = setInterval(() => {
                cpsTimeLeft--;
                document.getElementById('cpsTimer').textContent = cpsTimeLeft;
                
                if (cpsTimeLeft <= 0) {
                    clearInterval(cpsInterval);
                    finishCPSTest();
                }
            }, 1000);
        }

        function finishCPSTest() {
            cpsActive = false;
            const cps = (cpsClicks / 10).toFixed(2);
            document.getElementById('cpsButton').textContent = 'FINALIZADO';
            document.getElementById('cpsButton').disabled = true;
            
            let rating = '';
            let animal = '';
            if (cps < 3) {
                rating = 'Iniciante';
                animal = 'Tartaruga';
            } else if (cps < 5) {
                rating = 'Casual';
                animal = 'Gato';
            } else if (cps < 7) {
                rating = 'Bom';
                animal = 'Cachorro';
            } else if (cps < 9) {
                rating = 'Muito Bom';
                animal = 'Leopardo';
            } else {
                rating = 'Profissional';
                animal = 'Falcão';
            }

            setTimeout(() => {
                showResult('cps', {
                    score: cps,
                    clicks: cpsClicks,
                    rating: rating,
                    animal: animal
                });
            }, 1000);
        }

        const typingSentences = [
            "A prática leva à perfeição e a dedicação é fundamental para o sucesso",
            "O conhecimento é a chave que abre todas as portas da vida",
            "A tecnologia avança rapidamente e transforma nossa sociedade todos os dias",
            "A persistência supera a resistência e nos leva ao topo da montanha",
            "O tempo é o recurso mais precioso que temos em nossa existência",
            "A criatividade floresce quando deixamos nossa mente livre para explorar",
            "O aprendizado contínuo é essencial para o crescimento pessoal e profissional",
            "A saúde é o maior patrimônio que podemos cultivar ao longo da vida",
            "O respeito e a empatia constroem pontes entre diferentes culturas e pessoas",
            "A inovação surge quando desafiamos o status quo e pensamos diferente",
            "A paciência e a calma são virtudes fundamentais em tempos desafiadores",
            "O trabalho em equipe multiplica os resultados e fortalece as relações humanas",
            "A educação transforma vidas e abre portas para um futuro melhor",
            "A disciplina diária constrói hábitos que levam ao sucesso sustentável",
            "A gratidão nos conecta com o presente e traz paz interior"
        ];

        let typingText = '';
        let typingStartTime = null;
        let typingInterval = null;
        let typingUserInput = '';

        function prepareTypingTest() {
            typingText = typingSentences[Math.floor(Math.random() * typingSentences.length)];
            document.getElementById('typingText').innerHTML = '<div style="color: #7f8c8d; font-size: 1.2em;">Clique em INICIAR para começar o teste</div>';
            document.getElementById('typingInput').value = '';
            document.getElementById('typingInput').disabled = true;
            document.getElementById('typingTimer').textContent = '0.0s';
            document.getElementById('typingWPM').textContent = '0';
            document.getElementById('typingAccuracy').textContent = '100%';
            document.getElementById('typingStartBtn').style.display = 'block';
        }

        function startTypingTest() {
            document.getElementById('typingStartBtn').style.display = 'none';
            document.getElementById('typingText').innerHTML = typingText.split('').map(char => 
                `<span>${char}</span>`
            ).join('');
            
            const input = document.getElementById('typingInput');
            input.disabled = false;
            input.focus();
            
            input.onpaste = (e) => {
                e.preventDefault();
                return false;
            };
            
            input.oncopy = (e) => {
                e.preventDefault();
                return false;
            };
            
            input.oncut = (e) => {
                e.preventDefault();
                return false;
            };
            
            typingStartTime = Date.now();
            typingUserInput = '';
            input.oninput = handleTypingInput;

            typingInterval = setInterval(() => {
                const elapsed = ((Date.now() - typingStartTime) / 1000).toFixed(1);
                document.getElementById('typingTimer').textContent = elapsed + 's';
            }, 100);
        }

        function handleTypingInput(e) {
            typingUserInput = e.target.value;
            const textSpans = document.getElementById('typingText').querySelectorAll('span');
            
            let correct = 0;
            let incorrect = 0;

            for (let i = 0; i < textSpans.length; i++) {
                textSpans[i].classList.remove('correct', 'incorrect', 'current');
                
                if (i < typingUserInput.length) {
                    if (typingUserInput[i] === typingText[i]) {
                        textSpans[i].classList.add('correct');
                        correct++;
                    } else {
                        textSpans[i].classList.add('incorrect');
                        incorrect++;
                    }
                } else if (i === typingUserInput.length) {
                    textSpans[i].classList.add('current');
                }
            }

            const accuracy = typingUserInput.length > 0 
                ? ((correct / typingUserInput.length) * 100).toFixed(1) 
                : 100;
            document.getElementById('typingAccuracy').textContent = accuracy + '%';

            const elapsed = (Date.now() - typingStartTime) / 1000;
            const words = typingUserInput.trim().split(/\s+/).length;
            const wpm = Math.round((words / elapsed) * 60);
            document.getElementById('typingWPM').textContent = wpm;

            if (typingUserInput === typingText) {
                finishTypingTest();
            }
        }

        function finishTypingTest() {
            clearInterval(typingInterval);
            document.getElementById('typingInput').disabled = true;
            
            const elapsed = ((Date.now() - typingStartTime) / 1000).toFixed(2);
            const words = typingText.trim().split(/\s+/).length;
            const wpm = Math.round((words / (elapsed / 60)));
            
            let rating = '';
            if (wpm < 30) {
                rating = 'Iniciante';
            } else if (wpm < 50) {
                rating = 'Intermediário';
            } else if (wpm < 70) {
                rating = 'Avançado';
            } else if (wpm < 90) {
                rating = 'Expert';
            } else {
                rating = 'Mestre';
            }

            setTimeout(() => {
                showResult('typing', {
                    wpm: wpm,
                    time: elapsed,
                    accuracy: 100,
                    rating: rating
                });
            }, 1000);
        }

        let reactionAttempts = [];
        let reactionTimeout = null;
        let reactionStartTime = null;
        let reactionWaiting = false;

        function prepareReactionTest() {
            reactionAttempts = [];
            document.getElementById('reactionMessage').textContent = 'Clique em INICIAR';
            document.getElementById('reactionArea').className = 'reaction-area';
            document.getElementById('reactionResults').classList.add('hidden');
            document.getElementById('reactionStartBtn').style.display = 'block';
        }

        function startReactionTest() {
            document.getElementById('reactionStartBtn').style.display = 'none';
            reactionAttempts = [];
            nextReactionAttempt();
        }

        function nextReactionAttempt() {
            if (reactionAttempts.length >= 5) {
                finishReactionTest();
                return;
            }

            const area = document.getElementById('reactionArea');
            area.className = 'reaction-area waiting';
            area.style.pointerEvents = 'auto';
            document.getElementById('reactionMessage').textContent = 'Aguarde...';
            reactionWaiting = true;

            const delay = Math.random() * 3000 + 2000;
            reactionTimeout = setTimeout(() => {
                area.className = 'reaction-area ready';
                document.getElementById('reactionMessage').textContent = 'CLIQUE AGORA!';
                reactionStartTime = Date.now();
                reactionWaiting = false;
            }, delay);
        }

        function handleReactionClick() {
            if (reactionAttempts.length >= 5) return;

            if (reactionWaiting) {
                clearTimeout(reactionTimeout);
                reactionAttempts.push({
                    time: null,
                    tooSoon: true
                });
                document.getElementById('reactionMessage').textContent = 'Muito cedo! Aguarde...';
                setTimeout(() => nextReactionAttempt(), 1500);
                return;
            }

            if (!reactionStartTime) return;

            const reactionTime = Date.now() - reactionStartTime;
            reactionAttempts.push({
                time: reactionTime,
                tooSoon: false
            });

            const area = document.getElementById('reactionArea');
            area.className = 'reaction-area clicked';
            document.getElementById('reactionMessage').textContent = reactionTime + 'ms';
            reactionStartTime = null;

            setTimeout(() => nextReactionAttempt(), 1500);
        }

        function finishReactionTest() {
            const validAttempts = reactionAttempts.filter(a => !a.tooSoon);
            const average = validAttempts.length > 0
                ? Math.round(validAttempts.reduce((sum, a) => sum + a.time, 0) / validAttempts.length)
                : 0;

            let attemptsHTML = '';
            reactionAttempts.forEach((attempt, i) => {
                if (attempt.tooSoon) {
                    attemptsHTML += `
                        <div class="reaction-attempt">
                            <span>Tentativa ${i + 1}</span>
                            <span style="color: #e74c3c;">Muito Cedo!</span>
                        </div>
                    `;
                } else {
                    let className = 'medium';
                    if (attempt.time < 200) className = 'fast';
                    else if (attempt.time > 300) className = 'slow';
                    
                    attemptsHTML += `
                        <div class="reaction-attempt ${className}">
                            <span>Tentativa ${i + 1}</span>
                            <span style="color: #3498db;">${attempt.time}ms</span>
                        </div>
                    `;
                }
            });

            document.getElementById('reactionAttempts').innerHTML = attemptsHTML;
            document.getElementById('reactionAverage').textContent = average + 'ms';
            document.getElementById('reactionResults').classList.remove('hidden');
            document.getElementById('reactionArea').style.pointerEvents = 'none';

            let rating = '';
            if (average < 200) rating = 'Excelente';
            else if (average < 250) rating = 'Muito Bom';
            else if (average < 300) rating = 'Bom';
            else if (average < 350) rating = 'Mediano';
            else rating = 'Treinar Mais';

            setTimeout(() => {
                showResult('reaction', {
                    average: average,
                    attempts: reactionAttempts,
                    rating: rating
                });
            }, 3000);
        }

        let aimTargets = 0;
        let aimClicks = 0;
        let aimMisses = 0;
        let aimTimeLeft = 60;
        let aimInterval = null;
        let aimActive = false;

        function prepareAimTest() {
            aimTargets = 0;
            aimClicks = 0;
            aimMisses = 0;
            aimTimeLeft = 60;
            document.getElementById('aimTargets').textContent = '0';
            document.getElementById('aimTimer').textContent = '60';
            document.getElementById('aimAccuracy').textContent = '0';
            document.getElementById('aimArea').innerHTML = '<div id="aimMessage">Clique em INICIAR</div>';
            document.getElementById('aimStartBtn').style.display = 'block';
        }

        function startAimTest() {
            document.getElementById('aimStartBtn').style.display = 'none';
            aimActive = true;
            aimTargets = 0;
            aimClicks = 0;
            aimMisses = 0;
            aimTimeLeft = 60;
            document.getElementById('aimArea').innerHTML = '';

            const area = document.getElementById('aimArea');
            area.onclick = (e) => {
                if (e.target === area) {
                    aimMisses++;
                    updateAimStats();
                }
            };

            aimInterval = setInterval(() => {
                aimTimeLeft--;
                document.getElementById('aimTimer').textContent = aimTimeLeft;
                
                if (aimTimeLeft <= 0 || aimTargets >= 30) {
                    finishAimTest();
                }
            }, 1000);

            spawnTarget();
        }

        function spawnTarget() {
            if (!aimActive || aimTargets >= 30) return;

            const area = document.getElementById('aimArea');
            const target = document.createElement('div');
            target.className = 'target';
            
            const maxX = area.clientWidth - 60;
            const maxY = area.clientHeight - 60;
            const randomX = Math.random() * maxX;
            const randomY = Math.random() * maxY;
            
            target.style.left = randomX + 'px';
            target.style.top = randomY + 'px';
            
            target.onclick = (e) => {
                e.stopPropagation();
                target.remove();
                aimTargets++;
                aimClicks++;
                updateAimStats();
                
                if (aimTargets < 30) {
                    spawnTarget();
                }
            };

            area.appendChild(target);

            setTimeout(() => {
                if (target.parentNode) {
                    target.remove();
                    aimMisses++;
                    updateAimStats();
                    if (aimActive && aimTargets < 30) {
                        spawnTarget();
                    }
                }
            }, 2000);
        }

        function updateAimStats() {
            document.getElementById('aimTargets').textContent = aimTargets;
            const totalClicks = aimClicks + aimMisses;
            const accuracy = totalClicks > 0 ? Math.round((aimClicks / totalClicks) * 100) : 0;
            document.getElementById('aimAccuracy').textContent = accuracy;
        }

        function finishAimTest() {
            aimActive = false;
            clearInterval(aimInterval);
            document.getElementById('aimArea').onclick = null;
            document.getElementById('aimArea').innerHTML = '<div style="font-size: 1.5em; color: #3498db;">Teste Finalizado!</div>';

            const totalClicks = aimClicks + aimMisses;
            const accuracy = totalClicks > 0 ? Math.round((aimClicks / totalClicks) * 100) : 0;
            const timeTaken = 60 - aimTimeLeft;

            let rating = '';
            if (accuracy >= 90 && aimTargets >= 25) rating = 'Elite';
            else if (accuracy >= 80 && aimTargets >= 20) rating = 'Excelente';
            else if (accuracy >= 70 && aimTargets >= 15) rating = 'Bom';
            else if (accuracy >= 60) rating = 'Médio';
            else rating = 'Iniciante';

            setTimeout(() => {
                showResult('aim', {
                    targets: aimTargets,
                    accuracy: accuracy,
                    time: timeTaken,
                    rating: rating
                });
            }, 2000);
        }

        function showResult(testType, data) {
            document.getElementById('testSection').classList.add('hidden');
            document.getElementById('cpsSection').classList.add('hidden');
            document.getElementById('typingSection').classList.add('hidden');
            document.getElementById('reactionSection').classList.add('hidden');
            document.getElementById('aimSection').classList.add('hidden');

            let resultHTML = '';

            if (testType === 'iq') {
                let warningMsg = !currentUser ? ' ⚠️ Faça login para salvar seu histórico!' : '';
                resultHTML = `
                    <div class="result-card">
                        <h2 style="color: #2c3e50; margin-bottom: 20px;">Resultado do Teste de QI</h2>
                        <div class="result-score">${data.qi}</div>
                        <div class="result-animal">${data.animal}</div>
                        <div class="result-description">${data.description}${warningMsg}</div>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value">${data.correct}</div>
                                <div class="stat-label">Acertos</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${data.percentage}%</div>
                                <div class="stat-label">Percentual</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${data.time}</div>
                                <div class="stat-label">Tempo</div>
                            </div>
                        </div>
                        <button class="btn" onclick="startTest('iq')">Fazer Novo Teste</button>
                        <button class="btn btn-secondary" onclick="backToMenu()">Voltar ao Menu</button>
                    </div>
                `;
            } else if (testType === 'cps') {
                resultHTML = `
                    <div class="result-card">
                        <h2 style="color: #2c3e50; margin-bottom: 20px;">Resultado - Teste de Cliques</h2>
                        <div class="result-score">${data.score}</div>
                        <div style="font-size: 1.2em; color: #7f8c8d; margin-bottom: 20px;">CPS (Cliques por Segundo)</div>
                        <div class="result-animal">${data.animal}</div>
                        <div class="result-description">Classificação: ${data.rating}</div>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value">${data.clicks}</div>
                                <div class="stat-label">Total de Cliques</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${data.score}</div>
                                <div class="stat-label">CPS</div>
                            </div>
                        </div>
                        <button class="btn" onclick="startTest('cps')">Fazer Novo Teste</button>
                        <button class="btn btn-secondary" onclick="backToMenu()">Voltar ao Menu</button>
                    </div>
                `;
            } else if (testType === 'typing') {
                resultHTML = `
                    <div class="result-card">
                        <h2 style="color: #2c3e50; margin-bottom: 20px;">Resultado - Digitação</h2>
                        <div class="result-score">${data.wpm}</div>
                        <div style="font-size: 1.2em; color: #7f8c8d; margin-bottom: 20px;">PPM (Palavras por Minuto)</div>
                        <div class="result-description">Classificação: ${data.rating}</div>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value">${data.wpm}</div>
                                <div class="stat-label">PPM</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${data.time}s</div>
                                <div class="stat-label">Tempo</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${data.accuracy}%</div>
                                <div class="stat-label">Precisão</div>
                            </div>
                        </div>
                        <button class="btn" onclick="startTest('typing')">Fazer Novo Teste</button>
                        <button class="btn btn-secondary" onclick="backToMenu()">Voltar ao Menu</button>
                    </div>
                `;
            } else if (testType === 'reaction') {
                resultHTML = `
                    <div class="result-card">
                        <h2 style="color: #2c3e50; margin-bottom: 20px;">Resultado - Tempo de Reação</h2>
                        <div class="result-score">${data.average}ms</div>
                        <div style="font-size: 1.2em; color: #7f8c8d; margin-bottom: 20px;">Tempo Médio de Reação</div>
                        <div class="result-description">Classificação: ${data.rating}</div>
                        <button class="btn" onclick="startTest('reaction')">Fazer Novo Teste</button>
                        <button class="btn btn-secondary" onclick="backToMenu()">Voltar ao Menu</button>
                    </div>
                `;
            } else if (testType === 'aim') {
                resultHTML = `
                    <div class="result-card">
                        <h2 style="color: #2c3e50; margin-bottom: 20px;">Resultado - Teste de Mira</h2>
                        <div class="result-score">${data.accuracy}%</div>
                        <div style="font-size: 1.2em; color: #7f8c8d; margin-bottom: 20px;">Precisão</div>
                        <div class="result-description">Classificação: ${data.rating}</div>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value">${data.targets}/30</div>
                                <div class="stat-label">Alvos Acertados</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${data.accuracy}%</div>
                                <div class="stat-label">Precisão</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${data.time}s</div>
                                <div class="stat-label">Tempo</div>
                            </div>
                        </div>
                        <button class="btn" onclick="startTest('aim')">Fazer Novo Teste</button>
                        <button class="btn btn-secondary" onclick="backToMenu()">Voltar ao Menu</button>
                    </div>
                `;
            }

            document.getElementById('resultSection').innerHTML = resultHTML;
            document.getElementById('resultSection').classList.remove('hidden');

            saveTestToHistory(testType, data);
        }

        function saveTestToHistory(testType, data) {
            if (!currentUser) return;

            const users = JSON.parse(localStorage.getItem('iqTestUsers') || '{}');
            const user = users[currentUser];
            if (!user) return;

            if (!user.history) user.history = [];

            user.history.push({
                date: new Date().toLocaleString('pt-BR'),
                type: testType,
                data: data
            });

            localStorage.setItem('iqTestUsers', JSON.stringify(users));
        }

        function startTimer() {
            let totalSeconds = 1200;
            
            timerInterval = setInterval(() => {
                totalSeconds--;
                const minutes = Math.floor(totalSeconds / 60);
                const seconds = totalSeconds % 60;
                document.getElementById('timer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (totalSeconds <= 0) {
                    clearInterval(timerInterval);
                    finishTest();
                }
            }, 1000);
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            const container = document.getElementById('questionContainer');
            container.innerHTML = `
                <div class="question-container">
                    <div class="question-number">Questão ${currentQuestion + 1} de ${questions.length}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="options">
                        ${question.options.map((opt, i) => `
                            <div class="option" onclick="selectOption(${i})" data-option="${i}">
                                ${String.fromCharCode(65 + i)}) ${opt}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            if (userAnswers[currentQuestion] !== undefined) {
                const selected = container.querySelector(`[data-option="${userAnswers[currentQuestion]}"]`);
                if (selected) selected.classList.add('selected');
            }
        }

        function selectOption(index) {
            const options = document.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            options[index].classList.add('selected');
            userAnswers[currentQuestion] = index;
        }

        function nextQuestion() {
            if (userAnswers[currentQuestion] === undefined) {
                alert('Por favor, selecione uma resposta!');
                return;
            }

            currentQuestion++;
            
            if (currentQuestion >= questions.length) {
                finishTest();
            } else {
                showQuestion();
            }
        }

        function finishTest() {
            clearInterval(timerInterval);
            
            const correctCount = userAnswers.reduce((count, answer, index) => {
                return count + (answer === questions[index].correct ? 1 : 0);
            }, 0);

            const percentage = (correctCount / questions.length * 100).toFixed(1);
            const timeTaken = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(timeTaken / 60);
            const seconds = timeTaken % 60;

            const comparison = animalComparisons.find(comp => 
                correctCount >= comp.min && correctCount <= comp.max
            );

            showResult('iq', {
                qi: comparison.qi,
                animal: comparison.animal,
                description: comparison.description,
                correct: correctCount,
                percentage: percentage,
                time: `${minutes}:${seconds.toString().padStart(2, '0')}`
            });
        }

        function showHistory() {
            if (!currentUser) {
                alert('Faça login para visualizar seu histórico de testes!');
                return;
            }

            const users = JSON.parse(localStorage.getItem('iqTestUsers') || '{}');
            const user = users[currentUser];
            const historyList = document.getElementById('historyList');

            if (!user.history || user.history.length === 0) {
                historyList.innerHTML = '<p style="text-align: center; color: #aaa;">Nenhum teste realizado ainda.</p>';
            } else {
                const testTypeNames = {
                    'iq': 'Teste de QI',
                    'cps': 'Cliques por Segundo',
                    'typing': 'Velocidade de Digitação',
                    'reaction': 'Tempo de Reação',
                    'aim': 'Teste de Mira'
                };

                historyList.innerHTML = user.history.slice().reverse().map(test => {
                    let mainInfo = '';
                    let subInfo = '';
                    
                    if (test.type === 'iq' || !test.type) {
                        mainInfo = (test.data?.qi || test.qi) + ' - ' + (test.data?.animal || test.animal);
                        subInfo = `${test.data?.correct || test.correct}/20 (${test.data?.percentage || test.percentage}%)`;
                    } else if (test.type === 'cps') {
                        mainInfo = test.data.score + ' CPS';
                        subInfo = test.data.rating;
                    } else if (test.type === 'typing') {
                        mainInfo = test.data.wpm + ' PPM';
                        subInfo = test.data.rating;
                    } else if (test.type === 'reaction') {
                        mainInfo = test.data.average + 'ms';
                        subInfo = test.data.rating;
                    } else if (test.type === 'aim') {
                        mainInfo = test.data.accuracy + '% Precisão';
                        subInfo = test.data.targets + '/30 alvos';
                    }

                    const testName = testTypeNames[test.type] || testTypeNames['iq'];

                    return `
                        <div class="history-item">
                            <div>
                                <div style="color: #3498db; font-size: 0.9em; margin-bottom: 5px;">${testName}</div>
                                <div class="history-score">${mainInfo}</div>
                                <div class="history-date">${test.date}</div>
                            </div>
                            <div style="text-align: right;">
                                <div class="history-score">${subInfo}</div>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            document.getElementById('menuSection').classList.add('hidden');
            document.getElementById('historySection').classList.remove('hidden');
        }

        function backToMenu() {
            document.getElementById('testSection').classList.add('hidden');
            document.getElementById('cpsSection').classList.add('hidden');
            document.getElementById('typingSection').classList.add('hidden');
            document.getElementById('reactionSection').classList.add('hidden');
            document.getElementById('aimSection').classList.add('hidden');
            document.getElementById('resultSection').classList.add('hidden');
            document.getElementById('historySection').classList.add('hidden');
            document.getElementById('menuSection').classList.remove('hidden');
            
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            if (cpsInterval) {
                clearInterval(cpsInterval);
            }
            if (typingInterval) {
                clearInterval(typingInterval);
            }
            if (aimInterval) {
                clearInterval(aimInterval);
            }
        }

        initStars();
    </script>
</body>
</html>